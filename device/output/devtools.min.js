/*! devtools 2013-08-15 */
module.exports=function(t){"use strict";t.initConfig({pkg:t.file.readJSON("package.json"),concat:{dist:{src:["*.js","!node_modules/*","!output/*"],dest:"output/<%= pkg.name %>.js"}},uglify:{options:{banner:'/*! <%= pkg.name %> <%= grunt.template.today("yyyy-mm-dd") %> */\n'},build:{src:"output/<%= pkg.name %>.js",dest:"output/<%= pkg.name %>.min.js"}}}),t.loadNpmTasks("grunt-contrib-concat"),t.loadNpmTasks("grunt-contrib-uglify"),t.registerTask("build",["concat","uglify"])},function(){var t=function(t,e){var i=0,n=Array(t);n.__proto__=null;for(var s=0;t>s;s++)n[s]=e||0;return{get:function(e){return n[(i+e)%t]},push:function(e){n[i]=e,i=(t+i+1)%t},length:t}},e=function(t,e){var i=function(){this.initialize.apply(this,arguments)};return i.prototype=Object.create(t.prototype,e),i},i=e(Object,{initialize:{value:function(){this.container=new Sprite,this.rect={x:0,y:0,width:0,height:0}}},isShown:{get:function(){return this.container.visible}},addTo:{value:function(t){return t.addChild(this.container),this}},removeFromParent:{value:function(){return this.container.parent&&this.container.parent.removeChild(this.container),this}},resize:{value:function(t,e){return this.rect.width=t,this.rect.height=e,this}},offset:{value:function(t,e){return this.rect.x=this.container.x=t,this.rect.y=this.container.y=e,this}},show:{value:function(){return this.container.visible=!0,this}},hide:{value:function(){return this.container.visible=!1,this}}}),n=e(i,{initialize:{value:function(){i.prototype.initialize.call(this),this.onTap=null;var t=this;this.container.addEventListener("touchTap",function(){t.onTap&&t.onTap()})}}}),s=e(i,{initialize:{value:function(){i.prototype.initialize.call(this),this.tf=new TextField,this.tf.autoSize="left",this.tf.multiline=!0,this.container.addChild(this.tf)}},resize:{value:function(t,e){return i.prototype.resize.apply(this,arguments),this.tf.width=t,this.tf.height=e,this}},text:{get:function(){return this.tf.text},set:function(t){this.tf.text=t}}}),h=e(i,{initialize:{value:function(t){i.prototype.initialize.call(this),this.tfs=[],this.fmts={error:new TextFormat(null,14,16711680),log:new TextFormat(null,12,16777215)},this.container.mask=this.container.addChild(new Bitmap(new BitmapData(1,1,!0,4294901760))),this.container.mask.visible=!1,this.container.hitArea=this.container.addChild(new Bitmap(new BitmapData(1,1,!0,4294901760))),this.container.hitArea.alpha=0,this._clearBtn=(new n).addTo(this.container),this._clearBtnBmp=this._clearBtn.container.addChild(new Bitmap),this._tiny=t,this._lines=(new TinyGLTriangleStrip).addTo(this._tiny).colors(1090519039),this._scrollBar=(new TinyGLRectangle).addTo(this._tiny).colors(1090519039),this.logOffset=0,this.logRows=[],this.tf_log_dictionary={},this.tracking={prev:null,vec:null,reverb:null};var e=this;this._clearBtn.onTap=function(){e.clear()},this._onTouchBegin=function(t){e.onTouchBegin(t)},this._onTouchMove=function(t){e.onTouchMove(t)},this._onTouchEnd=function(t){e.onTouchEnd(t)},this._onEnterFrame=function(t){e.onEnterFrame(t)},this.container.addEventListener("touchBegin",this._onTouchBegin)}},_shareLoadedBitmapData:{value:function(t){this._clearBtnBmp.bitmapData=t,this._clearBtnBmp.setClippingRect(new Rectangle(51,45,18,18)),this._clearBtnBmp.width=this._clearBtnBmp.height=50,this._clearBtn.container.x=this.rect.width-this._clearBtn.container.width,this._clearBtn.container.y=this.rect.height-this._clearBtn.container.height}},onTouchBegin:{value:function(t){this.container.stage.addEventListener("touchMove",this._onTouchMove),this.container.stage.addEventListener("touchEnd",this._onTouchEnd),this.container.stage.removeEventListener("enterFrame",this._onEnterFrame),this.container.stage.addEventListener("enterFrame",this._onEnterFrame),this.tracking.prev={x:t.stageX,y:t.stageY},this.tracking.vec={x:0,y:0},this.tracking.reverb=null}},onTouchMove:{value:function(t){var e={x:t.stageX,y:t.stageY};this.tracking.vec.x+=e.x-this.tracking.prev.x,this.tracking.vec.y+=e.y-this.tracking.prev.y,this.tracking.prev=e}},onTouchEnd:{value:function(){this.tracking.reverb={x:this.tracking.vec.x,y:this.tracking.vec.y},this.container.stage.removeEventListener("touchMove",this._onTouchMove),this.container.stage.removeEventListener("touchEnd",this._onTouchEnd)}},onEnterFrame:{value:function(){if(null!==this.tracking.reverb&&(this.tracking.reverb.x*=.9,this.tracking.reverb.y*=.9,this.tracking.vec.x=this.tracking.reverb.x,this.tracking.vec.y=this.tracking.reverb.y,12>=Math.abs(this.tracking.reverb.y)&&(this.tracking.reverb=null,this.container.stage.removeEventListener("enterFrame",this._onEnterFrame))),0!==this.tracking.vec.y){var t=this.tracking.vec.y%12,e=(this.tracking.vec.y-t)/12;this.tracking.vec.y=t,this.logOffset+=e,this.logOffset>=this.logRows.length&&(this.logOffset=this.logRows.length-1),0>this.logOffset&&(this.logOffset=0),this.update()}}},resize:{value:function(t,e){return i.prototype.resize.apply(this,arguments),this.container.mask.width=this.container.hitArea.width=t,this.container.mask.height=this.container.hitArea.height=e,this.update(),this._clearBtn.container.x=t-this._clearBtn.container.width,this._clearBtn.container.y=e-this._clearBtn.container.height,this}},log:{value:function(){for(var t="",e=0;arguments.length>e;e++)t+=arguments[e]+", ";t=t.substr(0,t.length-2),this.logRows.push({id:"log_"+this.logRows.length,text:t,type:"log",tf:null}),this.update()}},onUncaughtError:{value:function(){var t=arguments[0],e="";app.isANDROID&&(e+=t.message,t.stack&&(e=t.stack)),app.isIOS&&(e+=t.message,e+=" url:"+t.sourceURL+" line:"+t.line),this.logRows.push({id:"log_"+this.logRows.length,text:e,type:"error",tf:null}),this.update()}},clear:{value:function(){for(var t=0;this.tfs.length>t;t++)this.tfs[t].row=null;this.logOffset=0,this.logRows=[],this.update()}},update:{value:function(){for(var t=this.logOffset,e=0;this.tfs.length>e;e++)this.tfs[e].visible=!1;for(var i=0,n=this.logRows.length-1-t,s=[],e=n+1;this.logRows.length>e&&this.logRows[e].tf;e++)this.logRows[e].tf.row=null,this.logRows[e].tf=null;for(;this.rect.height>i;){var h=this.logRows[n];if(!h)break;var a=h.tf&&h.tf.row===h?h.tf:null;if(null===a){for(var e=0;this.tfs.length>e;e++)if(null===this.tfs[e].row){a=this.tfs[e];break}null===a&&(a=new TextField,this.container.addChild(a),a.autoSize="left",a.wordWrap=!0,a.id="tf_"+this.tfs.length,a.row=null,a.mouseEnabled=!1,this.tfs.push(a)),h.tf=a,a.row=h,a.defaultTextFormat=this.fmts[h.type],a.text=h.text}a.width=this.rect.width,i+=a.height,a.y=this.rect.height-i,a.visible=!0;var r=this.rect.height-i+a.height;s.push(this.rect.x,this.rect.y+r-1,this.rect.x,this.rect.y+r-1,this.rect.x,this.rect.y+r,this.rect.x+this.rect.width,this.rect.y+r-1,this.rect.x+this.rect.width,this.rect.y+r,this.rect.x+this.rect.width,this.rect.y+r),n--}for(var e=n;e>=0&&this.logRows[e].tf;e--)this.logRows[e].tf.row=null,this.logRows[e].tf=null;this._lines.points.apply(this._lines,s),this._scrollBar.tl(this.rect.x+this.rect.width-7,this.rect.y+this.rect.height*((n+1)/this.logRows.length)).br(this.rect.x+this.rect.width-0,this.rect.y+this.rect.height*((this.logRows.length-t)/this.logRows.length))}},show:{value:function(){i.prototype.show.call(this),this._lines.addTo(this._tiny)}},hide:{value:function(){i.prototype.hide.call(this),this._lines.removeFrom(this._tiny)}}}),a=e(i,{initialize:{value:function(t){i.prototype.initialize.call(this),this._debug=t,this.tf=new TextField,this.container.addChild(this.tf),this.tf.text="0/0",this.tf.autoSize="left",this.tf.defaultTextFormat=new TextFormat(null,20,16777215),this.tf.background=!0,this.tf.backgroundColor=0,this.tf.alpha=.5,this._index=0,this.texView=new GLTextureView(0),this.textureLayer=new Layer(this.texView),this.textureLayer.alpha=.4,this.texMatrix=new Matrix,this._showTexture(0)}},offsetX:{get:function(){return this.textureLayer.offsetX},set:function(t){this.textureLayer.offsetX=t}},prev:{value:function(){return this._showTexture(-1),this}},next:{value:function(){return this._showTexture(1),this}},show:{value:function(){i.prototype.show.call(this);var t=window.getLayerIndex(this._debug._layer);return window.addLayerAt(this.textureLayer,t),this._showTexture(0),this}},hide:{value:function(){return i.prototype.hide.call(this),window.removeLayer(this.textureLayer),this}},resize:{value:function(){if(i.prototype.resize.apply(this,arguments),this._debug.orientationIsHorizontal?(this.textureLayer.scaleMode="noScale",this.textureLayer.horizontalAlign="left",this.textureLayer.verticalAlign="center"):(this.textureLayer.scaleMode="noScale",this.textureLayer.horizontalAlign="left",this.textureLayer.verticalAlign="center"),this.textureLayer.content){var t=this.rect.width*this._debug._layer.contentScaleX/this.textureLayer.content.naturalWidth,e=this.rect.height*this._debug._layer.contentScaleY/this.textureLayer.content.naturalHeight;this.texMatrix.a=this.texMatrix.d=Math.min(t,e),this.textureLayer.content.matrix=this.texMatrix}return this}},_showTexture:{value:function(t){var e=GLTextureView.getNumOfTextures();if(!(0>=e)){for(this._index+=t;0>this._index;)this._index+=e;for(;this._index>=e;)this._index-=e;this.tf.text=""+(this._index+1)+"/"+e,this.texView.index=this._index}}}}),r=e(i,{initialize:{value:function(e){i.prototype.initialize.call(this),this.label_fps60=new TextField,this.label_fps60.defaultTextFormat=new TextFormat(null,12,16776960),this.label_fps60.autoSize="left",this.label_fps60.text="60",this.container.addChild(this.label_fps60),this.label_fps30=new TextField,this.label_fps30.defaultTextFormat=new TextFormat(null,12,16776960),this.label_fps30.autoSize="left",this.label_fps30.text="30",this.container.addChild(this.label_fps30),this.label_mem100=new TextField,this.label_mem100.defaultTextFormat=new TextFormat(null,12,16711680),this.label_mem100.autoSize="left",this.label_mem100.text="mem:0%",this.container.addChild(this.label_mem100),this.label_doc=new TextField,this.label_doc.defaultTextFormat=new TextFormat(null,12,16777215),this.label_doc.autoSize="left",this.label_doc.text="doc:0",this.container.addChild(this.label_doc),this._tiny=e,this.bg=(new TinyGLRectangle).addTo(e).colors(570425344).tl(0,0).br(10,10),this.items={memory:{data:t(20),object:(new TinyGLTriangleStrip).colors(872349696).addTo(this._tiny)},fps:{data:t(20),currentCount:0,prevStamp:null,object:(new TinyGLTriangleStrip).colors(1728052992).addTo(this._tiny)},doc:{data:t(20),object:(new TinyGLTriangleStrip).colors(1728053247).addTo(this._tiny),max:1}}}},resize:{value:function(t,e){return i.prototype.resize.apply(this,arguments),this.bg.tl(this.container.x,this.container.y).br(this.container.x+t,this.container.y+e),this.update(),this.label_fps30.y=-this.label_fps30.height/2+.7*this.rect.height,this.label_fps60.y=-this.label_fps60.height/2+.4*this.rect.height,this.label_mem100.y=0*this.rect.height,this.label_mem100.x=this.rect.width-this.label_mem100.width-6,this}},notifyEnterFrame:{value:function(t){if(null===this.items.fps.prevStamp&&(this.items.fps.prevStamp=t.timeStamp),this.items.fps.prevStamp<=t.timeStamp-1e3){this.items.fps.data.push(this.items.fps.currentCount),this.items.fps.currentCount=0,this.items.fps.prevStamp=t.timeStamp;var e=app.memory;this.items.memory.data.push({used:e.used,total:e.total}),this.label_mem100.text="mem:"+Math.ceil(100*(e.used/e.total))+"%";var i=devtools.getDisplayObjectCount();this.label_doc.text="doc:"+i,this.items.doc.data.push(i),this.items.doc.max=Math.max(this.items.doc.max,i),this.update()}this.items.fps.currentCount++}},update:{value:function(){for(var t=this.items.fps.data,e=this.items.fps.object,i=Number.MIN_VALUE,n=Number.MAX_VALUE,s=0;t.length>s;s++)i=Math.max(i,t.get(s)),n=Math.min(n,t.get(s));for(var h=Array(4*t.length),a=this.rect.width/(t.length-1),s=0;t.length>s;s++)h[4*s+0]=this.rect.x+s*a,h[4*s+1]=this.rect.y+1+this.rect.height*(1-t.get(s)/100),h[4*s+2]=this.rect.x+s*a,h[4*s+3]=this.rect.y-1+this.rect.height*(1-t.get(s)/100);e.points.apply(e,h),t=this.items.memory.data,e=this.items.memory.object;for(var h=Array(4*t.length),s=0;t.length>s;s++){var r=t.get(s);0===r&&(r={used:0,total:100}),h[4*s+0]=this.rect.x+s*a,h[4*s+1]=this.rect.y+this.rect.height*(1-r.used/r.total),h[4*s+2]=this.rect.x+s*a,h[4*s+3]=this.rect.y+this.rect.height*(1-0/r.total)}e.points.apply(e,h),t=this.items.doc.data,e=this.items.doc.object;for(var i=this.items.doc.max,h=Array(4*t.length),s=0;t.length>s;s++)h[4*s+0]=this.rect.x+s*a,h[4*s+1]=this.rect.y+1+this.rect.height*(1-t.get(s)/i),h[4*s+2]=this.rect.x+s*a,h[4*s+3]=this.rect.y-1+this.rect.height*(1-t.get(s)/i);e.points.apply(e,h)}}}),o=e(s,{initialize:{value:function(t){s.prototype.initialize.call(this),this.tf.autoSize="left",this.tf.defaultTextFormat=new TextFormat(null,20),this.tf.textColor=16777215,this.tf.text="IP: "+app.activeNetworkIP,this.tf.x=18,this.tf.y=2,this.tf.alpha=.7,this.bg=(new TinyGLRectangle).addTo(t).colors(855638016).tl(0,0).br(10,10),this.lamp=this.container.addChild(new Bitmap),this.lamp.alpha=.7}},resize:{value:function(t,e){return s.prototype.resize.apply(this,arguments),this.bg.tl(this.container.x,this.container.y).br(this.container.x+t,this.container.y+e),this}},_shareLoadedBitmapData:{value:function(t){this.lamp.bitmapData=t,this.lamp.setClippingRect(new Rectangle(66,43,8,8)),this.lamp.width=this.lamp.height=10,this.lamp.x=5,this.lamp.y=10}}}),c="opening",l="closing",u=e(i,{initialize:{value:function(t){i.prototype.initialize.call(this),this.state=c,this.tweenFlag=!1,this._debug=t,this.tracking={prevTouch:null,vec:{x:0,y:0},ave:null,onScreen:!1},this.startAcc={index:-1,vecs:[-.05,-.025,-.0125,-.00625]};var e=this;this._onTouch=function(t){e.onTouch(t)},window.addEventListener("touchstart",this._onTouch)}},onTouch:{value:function(t){var e=t.changedTouches.item(0);switch(t.type){case"touchstart":if(this._debug.isShown!==!0){if(this.state=c,e.y<=4*window.innerHeight/5)return;if(e.x<=9*window.innerWidth/10)return;this._debug.offsetX=1,this._debug.show(),this.startAcc.index=0,window.addEventListener("touchmove",this._onTouch),window.addEventListener("touchend",this._onTouch),window.addEventListener("touchcancel",this._onTouch),this.tracking.vec={x:0,y:0},this.tracking.ave=null,this.tracking.prevTouch={x:e.x,y:e.y}}else this.state=l,window.addEventListener("touchmove",this._onTouch),window.addEventListener("touchend",this._onTouch),window.addEventListener("touchcancel",this._onTouch),this.tracking.vec={x:0,y:0},this.tracking.prevTouch={x:e.x,y:e.y};this.tracking.onScreen=!0;break;case"touchmove":this.tracking.vec.x+=e.x-this.tracking.prevTouch.x,this.tracking.vec.y+=e.y-this.tracking.prevTouch.y,this.tracking.prevTouch={x:e.x,y:e.y};break;case"touchend":case"touchcancel":window.removeEventListener("touchmove",this._onTouch),window.removeEventListener("touchend",this._onTouch),window.removeEventListener("touchcancel",this._onTouch),this.startAcc.index=-1,this.tracking.vec.x+=e.x-this.tracking.prevTouch.x,this.tracking.vec.y+=e.y-this.tracking.prevTouch.y,this.state===c&&5>this.tracking.vec.x&&this.open(),this.state===c&&this.tracking.vec.x>=5&&this.close(),this.tracking.onScreen=!1,this.tracking.prevTouch=null}}},open:{value:function(){this._debug.isShown&&0===this._debug.offsetX||(this.state=c,this.tweenFlag=!0)}},close:{value:function(){(this._debug.isShown===!0||1!==this._debug.offsetX)&&(this.state=l,this.tweenFlag=!0)}},notifyEnterFrame:{value:function(){if(this.tweenFlag)return this.state===c&&(this._debug.offsetX+=.3*(0-this._debug.offsetX),.01>=this._debug.offsetX&&(this._debug.offsetX=0,this.tweenFlag=!1)),this.state===l&&(this._debug.offsetX+=.3*(1-this._debug.offsetX),this._debug.offsetX>=.99&&(this._debug.offsetX=1,this.tweenFlag=!1,this._debug.hide())),void 0;if(null==this.tracking.ave&&(this.tracking.ave={x:this.tracking.vec.x,y:this.tracking.vec.y}),this.tracking.ave.x=this.tracking.ave.x/2+this.tracking.vec.x/2,this.tracking.ave.y=this.tracking.ave.y/2+this.tracking.vec.y/2,this.state===c&&1==this.tracking.onScreen){var t=this.tracking.vec.x/window.innerWidth;this.startAcc.index>=0&&(t+=this.startAcc.vecs[this.startAcc.index],this.startAcc.index++,this.startAcc.vecs.length<=this.startAcc.index&&(this.startAcc.index=-1)),this._debug.offsetX+=t}else if(this.state===l&&1!=this.tracking.onScreen){var t=this.tracking.ave.x/window.innerWidth;t>.05&&this.close()}this.tracking.vec={x:0,y:0}}}}),d=console.log,g=window.onUncaughtError,f=e(Object,{initialize:{value:function(){this._stage=new Stage(100,100),this._layer=new Layer(this._stage),this._layer.alpha=.7,this._tiny=new TinyGL(100,100),this._tinyLayer=new Layer(this._tiny),this._bg=(new TinyGLRectangle).addTo(this._tiny).colors(3137339392).tl(0,0).br(100,100),this._logView=new h(this._tiny).addTo(this._stage),this._textureView=new a(this).addTo(this._stage).hide(),this._graphView=new r(this._tiny).addTo(this._stage),this._buttonList=(new i).addTo(this._stage),this._footer=new o(this._tiny).addTo(this._stage),this._pullTab=new u(this),this._onOrientationChange=null,this._onEnterFrame=null,this._onLoadImage=null,this._onTouch=null,this.tracking={prev:null,vec:{x:0,y:0}},this._isShown=!1;var t=this;(function(){var e=new Image;e.src="data:image/png;base64,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",e.onload=function(){console.log("aaaaaas"),t._onLoadImage(this),t._onLoadImage=null}})(),this._onLoadImage=function(t){console.log("aaa");var e=new BitmapData(t),i=null,s=new BitmapData(1,1,!0,0),h=null,a=null,r=this;new ColorTransform(1,1,1,.4,255,255,255,0),this._logView._shareLoadedBitmapData(e),this._footer._shareLoadedBitmapData(e),i=(new n).addTo(this._buttonList.container),a=i.container.addChild(new Bitmap(s)),a.width=a.height=50,h=i.container.addChild(new Bitmap(e,!0,!0,new Rectangle(47,0,45,40))),h.x=3,h.y=5,i.container.width=i.container.height=100,i.onTap=function(){r._textureView.hide(),r._logView.show()},i.container.x=0,i.container.y=0,i=(new n).addTo(this._buttonList.container),a=i.container.addChild(new Bitmap(s)),a.width=a.height=50,h=i.container.addChild(new Bitmap(e,!0,!0,new Rectangle(0,0,44,40))),h.x=3,h.y=5,i.container.width=i.container.height=100,i.onTap=function(){r._logView.hide(),r._textureView.isShown?r._textureView.next():r._textureView.show()},i.container.x=100,i.container.y=0,i=(new n).addTo(this._buttonList.container),a=i.container.addChild(new Bitmap(s)),a.width=a.height=22,h=i.container.addChild(new Bitmap(e,!0,!0,new Rectangle(15,44,18,18))),h.x=2,h.y=2,i.container.width=i.container.height=100,i.onTap=function(){location.reload()},i.container.x=0,i.container.y=100;var i=(new n).addTo(this._buttonList.container);a=i.container.addChild(new Bitmap(s)),a.width=a.height=22,h=i.container.addChild(new Bitmap(e,!0,!0,new Rectangle(34,43,16.5,20))),h.x=1,h.y=1,i.container.width=i.container.height=100,i.onTap=function(){app.gc()},i.container.x=100,i.container.y=100}}},orientationIsHorizontal:{get:function(){return window.innerWidth>window.innerHeight}},offsetX:{get:function(){return this._layer.offsetX},set:function(t){this._layer.offsetX=this._tinyLayer.offsetX=t,this._textureView.offsetX=this._layer.offsetX}},isShown:{get:function(){return this._isShown}},show:{value:function(){if(!this.isShown){this._isShown=!0,window.addLayer(this._tinyLayer),window.addLayer(this._layer);var t=this;window.addEventListener("orientationchange",this._onOrientationChange=function(){setTimeout(function(){t._layOut()},1e3)}),this._stage.addEventListener("enterFrame",this._onEnterFrame=function(e){t.onEnterFrame(e)}),this._logView.show(),this._layOut()}}},hide:{value:function(){this.isShown&&(this._isShown=!1,window.removeLayer(this._layer),window.removeLayer(this._tinyLayer),window.removeEventListener("orientationchange",this._onOrientationChange),this._stage.removeEventListener("enterFrame",this._onEnterFrame),this._onOrientationChange=null,this._logView.hide(),this._textureView.hide())}},log:{value:function(){this._logView.log.apply(this._logView,arguments),d.apply(console,arguments)}},onEnterFrame:{value:function(t){this._graphView.notifyEnterFrame(t),this._pullTab.notifyEnterFrame(t)}},onUncaughtError:{value:function(){this._logView.onUncaughtError.apply(this._logView,arguments),this.show(),g.apply(window,arguments)}},_layOut:{value:function(){var t,e,i=30;if(this.orientationIsHorizontal){var t=2*640*(window.innerWidth/window.innerHeight)/3,e=1280/3;this._tiny.width=this._stage.stageWidth=t,this._tiny.height=this._stage.stageHeight=e,this._bg.br(t,e),this._logView.offset(0,0).resize(3*t/5,e-i),this._textureView.offset(0,0).resize(3*t/5,e-i),this._graphView.offset(3*t/5,0).resize(2*t/5,e/2),this._buttonList.offset(3*t/5,e/2),this._footer.offset(0,e-i).resize(t,i)}else{var t=1280/3,e=2*640*(window.innerHeight/window.innerWidth)/3;this._tiny.width=this._stage.stageWidth=t,this._tiny.height=this._stage.stageHeight=e,this._bg.br(t,e),this._logView.offset(0,0).resize(t,3*e/5),this._textureView.offset(0,0).resize(t,3*e/5),this._graphView.offset(t/2,3*e/5).resize(t/2,2*e/5-i),this._buttonList.offset(0,3*e/5),this._footer.offset(0,e-i).resize(t,i)}}}}),p=new f;console.log=function(){p.log.apply(p,arguments)},window.onUncaughtError=function(){p.onUncaughtError.apply(p,arguments)},window.devtools?window.devtools.view=p:window.debug=p}(),helpers=new function(){this.isArray=function(t){return t instanceof Array},this.isRegExp=function(t){return t instanceof RegExp},this.isDate=function(t){return t instanceof Date},this.isUndefined=function(t){return void 0===t},this.isObject=function(t){return t instanceof Object}};var primitiveTypes={undefined:!0,"boolean":!0,number:!0,string:!0},isPrimitiveValue=function(t){return primitiveTypes[typeof t]};helpers.isPrimitiveValue=isPrimitiveValue;var subtype=function(t){if(null===t)return"null";if(helpers.isPrimitiveValue(t))return null;if(helpers.isArray(t))return"array";if(helpers.isRegExp(t))return"regexp";if(helpers.isDate(t))return"date";try{if("[object Arguments]"===Object.prototype.toString.call(t)&&isFinite(t.length))return"array"}catch(e){}return null};helpers.subtype=subtype;var describe=function(t){if(helpers.isPrimitiveValue(t))return null;var e=helpers.subtype(t);if("regexp"===e)return""+t;if("date"===e)return""+t;if("array"===e){var i="array ";return"number"==typeof t.length&&(i+="["+t.length+"]"),i}if("function"==typeof t)return""+t;if(helpers.isObject(t)){var n=t.constructor&&t.constructor.name;if(n)return n}return""+t},decycle=function(t){"use strict";var e=[],i=[];return function n(t,s){var h,a,r;switch(typeof t){case"object":if(!t)return null;for(h=0;e.length>h;h+=1)if(e[h]===t)return{$ref:i[h]};if(e.push(t),i.push(s),"[object Array]"===Object.prototype.toString.apply(t))for(r=[],h=0;t.length>h;h+=1)r[h]=n(t[h],s+"["+h+"]");else{r={};for(a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=n(t[a],s+"["+JSON.stringify(a)+"]"))}return r;case"number":case"string":case"boolean":return t}}(t,"$")};helpers.decycle=decycle,helpers.describe=describe,function(){var t=function(t,e){var i=0,n=Array(t);n.__proto__=null;for(var s=0;t>s;s++)n[s]=e||0;return{get:function(e){return n[(i+e)%t]},push:function(e){n[i]=e,i=(t+i+1)%t},length:t}},e=function(t,e){var i=function(){this.initialize.apply(this,arguments)};return i.prototype=Object.create(t.prototype,e),i},i=e(Object,{initialize:{value:function(){this.container=new Sprite,this.rect={x:0,y:0,width:0,height:0}}},isShown:{get:function(){return this.container.visible}},addTo:{value:function(t){return t.addChild(this.container),this}},removeFromParent:{value:function(){return this.container.parent&&this.container.parent.removeChild(this.container),this}},resize:{value:function(t,e){return this.rect.width=t,this.rect.height=e,this}},offset:{value:function(t,e){return this.rect.x=this.container.x=t,this.rect.y=this.container.y=e,this}},show:{value:function(){return this.container.visible=!0,this}},hide:{value:function(){return this.container.visible=!1,this}}}),n=e(i,{initialize:{value:function(){i.prototype.initialize.call(this),this.onTap=null;var t=this;this.container.addEventListener("touchTap",function(){t.onTap&&t.onTap()})}}}),s=e(i,{initialize:{value:function(){i.prototype.initialize.call(this),this.tf=new TextField,this.tf.autoSize="left",this.tf.multiline=!0,this.container.addChild(this.tf)}},resize:{value:function(t,e){return i.prototype.resize.apply(this,arguments),this.tf.width=t,this.tf.height=e,this}},text:{get:function(){return this.tf.text},set:function(t){this.tf.text=t}}}),h=e(i,{initialize:{value:function(t){i.prototype.initialize.call(this),this.tfs=[],this.fmts={error:new TextFormat(null,14,16711680),log:new TextFormat(null,12,16777215)},this.container.mask=this.container.addChild(new Bitmap(new BitmapData(1,1,!0,4294901760))),this.container.mask.visible=!1,this.container.hitArea=this.container.addChild(new Bitmap(new BitmapData(1,1,!0,4294901760))),this.container.hitArea.alpha=0,this._clearBtn=(new n).addTo(this.container),this._clearBtnBmp=this._clearBtn.container.addChild(new Bitmap),this._tiny=t,this._lines=(new TinyGLTriangleStrip).addTo(this._tiny).colors(1090519039),this._scrollBar=(new TinyGLRectangle).addTo(this._tiny).colors(1090519039),this.logOffset=0,this.logRows=[],this.tf_log_dictionary={},this.tracking={prev:null,vec:null,reverb:null};var e=this;this._clearBtn.onTap=function(){e.clear()},this._onTouchBegin=function(t){e.onTouchBegin(t)},this._onTouchMove=function(t){e.onTouchMove(t)},this._onTouchEnd=function(t){e.onTouchEnd(t)},this._onEnterFrame=function(t){e.onEnterFrame(t)},this.container.addEventListener("touchBegin",this._onTouchBegin)}},_shareLoadedBitmapData:{value:function(t){this._clearBtnBmp.bitmapData=t,this._clearBtnBmp.setClippingRect(new Rectangle(51,45,18,18)),this._clearBtnBmp.width=this._clearBtnBmp.height=50,this._clearBtn.container.x=this.rect.width-this._clearBtn.container.width,this._clearBtn.container.y=this.rect.height-this._clearBtn.container.height}},onTouchBegin:{value:function(t){this.container.stage.addEventListener("touchMove",this._onTouchMove),this.container.stage.addEventListener("touchEnd",this._onTouchEnd),this.container.stage.removeEventListener("enterFrame",this._onEnterFrame),this.container.stage.addEventListener("enterFrame",this._onEnterFrame),this.tracking.prev={x:t.stageX,y:t.stageY},this.tracking.vec={x:0,y:0},this.tracking.reverb=null}},onTouchMove:{value:function(t){var e={x:t.stageX,y:t.stageY};this.tracking.vec.x+=e.x-this.tracking.prev.x,this.tracking.vec.y+=e.y-this.tracking.prev.y,this.tracking.prev=e}},onTouchEnd:{value:function(){this.tracking.reverb={x:this.tracking.vec.x,y:this.tracking.vec.y},this.container.stage.removeEventListener("touchMove",this._onTouchMove),this.container.stage.removeEventListener("touchEnd",this._onTouchEnd)}},onEnterFrame:{value:function(){if(null!==this.tracking.reverb&&(this.tracking.reverb.x*=.9,this.tracking.reverb.y*=.9,this.tracking.vec.x=this.tracking.reverb.x,this.tracking.vec.y=this.tracking.reverb.y,12>=Math.abs(this.tracking.reverb.y)&&(this.tracking.reverb=null,this.container.stage.removeEventListener("enterFrame",this._onEnterFrame))),0!==this.tracking.vec.y){var t=this.tracking.vec.y%12,e=(this.tracking.vec.y-t)/12;this.tracking.vec.y=t,this.logOffset+=e,this.logOffset>=this.logRows.length&&(this.logOffset=this.logRows.length-1),0>this.logOffset&&(this.logOffset=0),this.update()}}},resize:{value:function(t,e){return i.prototype.resize.apply(this,arguments),this.container.mask.width=this.container.hitArea.width=t,this.container.mask.height=this.container.hitArea.height=e,this.update(),this._clearBtn.container.x=t-this._clearBtn.container.width,this._clearBtn.container.y=e-this._clearBtn.container.height,this}},log:{value:function(){for(var t="",e=0;arguments.length>e;e++)t+=arguments[e]+", ";t=t.substr(0,t.length-2),this.logRows.push({id:"log_"+this.logRows.length,text:t,type:"log",tf:null}),this.update()}},onUncaughtError:{value:function(){var t=arguments[0],e="";app.isANDROID&&(e+=t.message,t.stack&&(e=t.stack)),app.isIOS&&(e+=t.message,e+=" url:"+t.sourceURL+" line:"+t.line),this.logRows.push({id:"log_"+this.logRows.length,text:e,type:"error",tf:null}),this.update()
}},clear:{value:function(){for(var t=0;this.tfs.length>t;t++)this.tfs[t].row=null;this.logOffset=0,this.logRows=[],this.update()}},update:{value:function(){for(var t=this.logOffset,e=0;this.tfs.length>e;e++)this.tfs[e].visible=!1;for(var i=0,n=this.logRows.length-1-t,s=[],e=n+1;this.logRows.length>e&&this.logRows[e].tf;e++)this.logRows[e].tf.row=null,this.logRows[e].tf=null;for(;this.rect.height>i;){var h=this.logRows[n];if(!h)break;var a=h.tf&&h.tf.row===h?h.tf:null;if(null===a){for(var e=0;this.tfs.length>e;e++)if(null===this.tfs[e].row){a=this.tfs[e];break}null===a&&(a=new TextField,this.container.addChild(a),a.autoSize="left",a.wordWrap=!0,a.id="tf_"+this.tfs.length,a.row=null,a.mouseEnabled=!1,this.tfs.push(a)),h.tf=a,a.row=h,a.defaultTextFormat=this.fmts[h.type],a.text=h.text}a.width=this.rect.width,i+=a.height,a.y=this.rect.height-i,a.visible=!0;var r=this.rect.height-i+a.height;s.push(this.rect.x,this.rect.y+r-1,this.rect.x,this.rect.y+r-1,this.rect.x,this.rect.y+r,this.rect.x+this.rect.width,this.rect.y+r-1,this.rect.x+this.rect.width,this.rect.y+r,this.rect.x+this.rect.width,this.rect.y+r),n--}for(var e=n;e>=0&&this.logRows[e].tf;e--)this.logRows[e].tf.row=null,this.logRows[e].tf=null;this._lines.points.apply(this._lines,s),this._scrollBar.tl(this.rect.x+this.rect.width-7,this.rect.y+this.rect.height*((n+1)/this.logRows.length)).br(this.rect.x+this.rect.width-0,this.rect.y+this.rect.height*((this.logRows.length-t)/this.logRows.length))}},show:{value:function(){i.prototype.show.call(this),this._lines.addTo(this._tiny)}},hide:{value:function(){i.prototype.hide.call(this),this._lines.removeFrom(this._tiny)}}}),a=e(i,{initialize:{value:function(t){i.prototype.initialize.call(this),this._debug=t,this.tf=new TextField,this.container.addChild(this.tf),this.tf.text="0/0",this.tf.autoSize="left",this.tf.defaultTextFormat=new TextFormat(null,20,16777215),this.tf.background=!0,this.tf.backgroundColor=0,this.tf.alpha=.5,this._index=0,this.texView=new GLTextureView(0),this.textureLayer=new Layer(this.texView),this.textureLayer.alpha=.4,this.texMatrix=new Matrix,this._showTexture(0)}},offsetX:{get:function(){return this.textureLayer.offsetX},set:function(t){this.textureLayer.offsetX=t}},prev:{value:function(){return this._showTexture(-1),this}},next:{value:function(){return this._showTexture(1),this}},show:{value:function(){i.prototype.show.call(this);var t=window.getLayerIndex(this._debug._layer);return window.addLayerAt(this.textureLayer,t),this._showTexture(0),this}},hide:{value:function(){return i.prototype.hide.call(this),window.removeLayer(this.textureLayer),this}},resize:{value:function(){if(i.prototype.resize.apply(this,arguments),this._debug.orientationIsHorizontal?(this.textureLayer.scaleMode="noScale",this.textureLayer.horizontalAlign="left",this.textureLayer.verticalAlign="center"):(this.textureLayer.scaleMode="noScale",this.textureLayer.horizontalAlign="left",this.textureLayer.verticalAlign="center"),this.textureLayer.content){var t=this.rect.width*this._debug._layer.contentScaleX/this.textureLayer.content.naturalWidth,e=this.rect.height*this._debug._layer.contentScaleY/this.textureLayer.content.naturalHeight;this.texMatrix.a=this.texMatrix.d=Math.min(t,e),this.textureLayer.content.matrix=this.texMatrix}return this}},_showTexture:{value:function(t){var e=GLTextureView.getNumOfTextures();if(!(0>=e)){for(this._index+=t;0>this._index;)this._index+=e;for(;this._index>=e;)this._index-=e;this.tf.text=""+(this._index+1)+"/"+e,this.texView.index=this._index}}}}),r=e(i,{initialize:{value:function(e){i.prototype.initialize.call(this),this.label_fps60=new TextField,this.label_fps60.defaultTextFormat=new TextFormat(null,12,16776960),this.label_fps60.autoSize="left",this.label_fps60.text="60",this.container.addChild(this.label_fps60),this.label_fps30=new TextField,this.label_fps30.defaultTextFormat=new TextFormat(null,12,16776960),this.label_fps30.autoSize="left",this.label_fps30.text="30",this.container.addChild(this.label_fps30),this.label_mem100=new TextField,this.label_mem100.defaultTextFormat=new TextFormat(null,12,16711680),this.label_mem100.autoSize="left",this.label_mem100.text="mem:0%",this.container.addChild(this.label_mem100),this.label_doc=new TextField,this.label_doc.defaultTextFormat=new TextFormat(null,12,16777215),this.label_doc.autoSize="left",this.label_doc.text="doc:0",this.container.addChild(this.label_doc),this._tiny=e,this.bg=(new TinyGLRectangle).addTo(e).colors(570425344).tl(0,0).br(10,10),this.items={memory:{data:t(20),object:(new TinyGLTriangleStrip).colors(872349696).addTo(this._tiny)},fps:{data:t(20),currentCount:0,prevStamp:null,object:(new TinyGLTriangleStrip).colors(1728052992).addTo(this._tiny)},doc:{data:t(20),object:(new TinyGLTriangleStrip).colors(1728053247).addTo(this._tiny),max:1}}}},resize:{value:function(t,e){return i.prototype.resize.apply(this,arguments),this.bg.tl(this.container.x,this.container.y).br(this.container.x+t,this.container.y+e),this.update(),this.label_fps30.y=-this.label_fps30.height/2+.7*this.rect.height,this.label_fps60.y=-this.label_fps60.height/2+.4*this.rect.height,this.label_mem100.y=0*this.rect.height,this.label_mem100.x=this.rect.width-this.label_mem100.width-6,this}},notifyEnterFrame:{value:function(t){if(null===this.items.fps.prevStamp&&(this.items.fps.prevStamp=t.timeStamp),this.items.fps.prevStamp<=t.timeStamp-1e3){this.items.fps.data.push(this.items.fps.currentCount),this.items.fps.currentCount=0,this.items.fps.prevStamp=t.timeStamp;var e=app.memory;this.items.memory.data.push({used:e.used,total:e.total}),this.label_mem100.text="mem:"+Math.ceil(100*(e.used/e.total))+"%";var i=devtools.getDisplayObjectCount();this.label_doc.text="doc:"+i,this.items.doc.data.push(i),this.items.doc.max=Math.max(this.items.doc.max,i),this.update()}this.items.fps.currentCount++}},update:{value:function(){for(var t=this.items.fps.data,e=this.items.fps.object,i=Number.MIN_VALUE,n=Number.MAX_VALUE,s=0;t.length>s;s++)i=Math.max(i,t.get(s)),n=Math.min(n,t.get(s));for(var h=Array(4*t.length),a=this.rect.width/(t.length-1),s=0;t.length>s;s++)h[4*s+0]=this.rect.x+s*a,h[4*s+1]=this.rect.y+1+this.rect.height*(1-t.get(s)/100),h[4*s+2]=this.rect.x+s*a,h[4*s+3]=this.rect.y-1+this.rect.height*(1-t.get(s)/100);e.points.apply(e,h),t=this.items.memory.data,e=this.items.memory.object;for(var h=Array(4*t.length),s=0;t.length>s;s++){var r=t.get(s);0===r&&(r={used:0,total:100}),h[4*s+0]=this.rect.x+s*a,h[4*s+1]=this.rect.y+this.rect.height*(1-r.used/r.total),h[4*s+2]=this.rect.x+s*a,h[4*s+3]=this.rect.y+this.rect.height*(1-0/r.total)}e.points.apply(e,h),t=this.items.doc.data,e=this.items.doc.object;for(var i=this.items.doc.max,h=Array(4*t.length),s=0;t.length>s;s++)h[4*s+0]=this.rect.x+s*a,h[4*s+1]=this.rect.y+1+this.rect.height*(1-t.get(s)/i),h[4*s+2]=this.rect.x+s*a,h[4*s+3]=this.rect.y-1+this.rect.height*(1-t.get(s)/i);e.points.apply(e,h)}}}),o=e(s,{initialize:{value:function(t){s.prototype.initialize.call(this),this.tf.autoSize="left",this.tf.defaultTextFormat=new TextFormat(null,20),this.tf.textColor=16777215,this.tf.text="IP: "+app.activeNetworkIP,this.tf.x=18,this.tf.y=2,this.tf.alpha=.7,this.bg=(new TinyGLRectangle).addTo(t).colors(855638016).tl(0,0).br(10,10),this.lamp=this.container.addChild(new Bitmap),this.lamp.alpha=.7}},resize:{value:function(t,e){return s.prototype.resize.apply(this,arguments),this.bg.tl(this.container.x,this.container.y).br(this.container.x+t,this.container.y+e),this}},_shareLoadedBitmapData:{value:function(t){this.lamp.bitmapData=t,this.lamp.setClippingRect(new Rectangle(66,43,8,8)),this.lamp.width=this.lamp.height=10,this.lamp.x=5,this.lamp.y=10}}}),c="opening",l="closing",u=e(i,{initialize:{value:function(t){i.prototype.initialize.call(this),this.state=c,this.tweenFlag=!1,this._debug=t,this.tracking={prevTouch:null,vec:{x:0,y:0},ave:null,onScreen:!1},this.startAcc={index:-1,vecs:[-.05,-.025,-.0125,-.00625]};var e=this;this._onTouch=function(t){e.onTouch(t)},window.addEventListener("touchstart",this._onTouch)}},onTouch:{value:function(t){var e=t.changedTouches.item(0);switch(t.type){case"touchstart":if(this._debug.isShown!==!0){if(this.state=c,e.y<=4*window.innerHeight/5)return;if(e.x<=9*window.innerWidth/10)return;this._debug.offsetX=1,this._debug.show(),this.startAcc.index=0,window.addEventListener("touchmove",this._onTouch),window.addEventListener("touchend",this._onTouch),window.addEventListener("touchcancel",this._onTouch),this.tracking.vec={x:0,y:0},this.tracking.ave=null,this.tracking.prevTouch={x:e.x,y:e.y}}else this.state=l,window.addEventListener("touchmove",this._onTouch),window.addEventListener("touchend",this._onTouch),window.addEventListener("touchcancel",this._onTouch),this.tracking.vec={x:0,y:0},this.tracking.prevTouch={x:e.x,y:e.y};this.tracking.onScreen=!0;break;case"touchmove":this.tracking.vec.x+=e.x-this.tracking.prevTouch.x,this.tracking.vec.y+=e.y-this.tracking.prevTouch.y,this.tracking.prevTouch={x:e.x,y:e.y};break;case"touchend":case"touchcancel":window.removeEventListener("touchmove",this._onTouch),window.removeEventListener("touchend",this._onTouch),window.removeEventListener("touchcancel",this._onTouch),this.startAcc.index=-1,this.tracking.vec.x+=e.x-this.tracking.prevTouch.x,this.tracking.vec.y+=e.y-this.tracking.prevTouch.y,this.state===c&&5>this.tracking.vec.x&&this.open(),this.state===c&&this.tracking.vec.x>=5&&this.close(),this.tracking.onScreen=!1,this.tracking.prevTouch=null}}},open:{value:function(){this._debug.isShown&&0===this._debug.offsetX||(this.state=c,this.tweenFlag=!0)}},close:{value:function(){(this._debug.isShown===!0||1!==this._debug.offsetX)&&(this.state=l,this.tweenFlag=!0)}},notifyEnterFrame:{value:function(){if(this.tweenFlag)return this.state===c&&(this._debug.offsetX+=.3*(0-this._debug.offsetX),.01>=this._debug.offsetX&&(this._debug.offsetX=0,this.tweenFlag=!1)),this.state===l&&(this._debug.offsetX+=.3*(1-this._debug.offsetX),this._debug.offsetX>=.99&&(this._debug.offsetX=1,this.tweenFlag=!1,this._debug.hide())),void 0;if(null==this.tracking.ave&&(this.tracking.ave={x:this.tracking.vec.x,y:this.tracking.vec.y}),this.tracking.ave.x=this.tracking.ave.x/2+this.tracking.vec.x/2,this.tracking.ave.y=this.tracking.ave.y/2+this.tracking.vec.y/2,this.state===c&&1==this.tracking.onScreen){var t=this.tracking.vec.x/window.innerWidth;this.startAcc.index>=0&&(t+=this.startAcc.vecs[this.startAcc.index],this.startAcc.index++,this.startAcc.vecs.length<=this.startAcc.index&&(this.startAcc.index=-1)),this._debug.offsetX+=t}else if(this.state===l&&1!=this.tracking.onScreen){var t=this.tracking.ave.x/window.innerWidth;t>.05&&this.close()}this.tracking.vec={x:0,y:0}}}}),d=console.log,g=window.onUncaughtError,f=e(Object,{initialize:{value:function(){this._stage=new Stage(100,100),this._layer=new Layer(this._stage),this._layer.alpha=.7,this._tiny=new TinyGL(100,100),this._tinyLayer=new Layer(this._tiny),this._bg=(new TinyGLRectangle).addTo(this._tiny).colors(3137339392).tl(0,0).br(100,100),this._logView=new h(this._tiny).addTo(this._stage),this._textureView=new a(this).addTo(this._stage).hide(),this._graphView=new r(this._tiny).addTo(this._stage),this._buttonList=(new i).addTo(this._stage),this._footer=new o(this._tiny).addTo(this._stage),this._pullTab=new u(this),this._onOrientationChange=null,this._onEnterFrame=null,this._onLoadImage=null,this._onTouch=null,this.tracking={prev:null,vec:{x:0,y:0}},this._isShown=!1;var t=this;(function(){var e=new Image;e.src="data:image/png;base64,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",e.onload=function(){console.log("aaaaaas"),t._onLoadImage(this),t._onLoadImage=null}})(),this._onLoadImage=function(t){console.log("aaa");var e=new BitmapData(t),i=null,s=new BitmapData(1,1,!0,0),h=null,a=null,r=this;new ColorTransform(1,1,1,.4,255,255,255,0),this._logView._shareLoadedBitmapData(e),this._footer._shareLoadedBitmapData(e),i=(new n).addTo(this._buttonList.container),a=i.container.addChild(new Bitmap(s)),a.width=a.height=50,h=i.container.addChild(new Bitmap(e,!0,!0,new Rectangle(47,0,45,40))),h.x=3,h.y=5,i.container.width=i.container.height=100,i.onTap=function(){r._textureView.hide(),r._logView.show()},i.container.x=0,i.container.y=0,i=(new n).addTo(this._buttonList.container),a=i.container.addChild(new Bitmap(s)),a.width=a.height=50,h=i.container.addChild(new Bitmap(e,!0,!0,new Rectangle(0,0,44,40))),h.x=3,h.y=5,i.container.width=i.container.height=100,i.onTap=function(){r._logView.hide(),r._textureView.isShown?r._textureView.next():r._textureView.show()},i.container.x=100,i.container.y=0,i=(new n).addTo(this._buttonList.container),a=i.container.addChild(new Bitmap(s)),a.width=a.height=22,h=i.container.addChild(new Bitmap(e,!0,!0,new Rectangle(15,44,18,18))),h.x=2,h.y=2,i.container.width=i.container.height=100,i.onTap=function(){location.reload()},i.container.x=0,i.container.y=100;var i=(new n).addTo(this._buttonList.container);a=i.container.addChild(new Bitmap(s)),a.width=a.height=22,h=i.container.addChild(new Bitmap(e,!0,!0,new Rectangle(34,43,16.5,20))),h.x=1,h.y=1,i.container.width=i.container.height=100,i.onTap=function(){app.gc()},i.container.x=100,i.container.y=100}}},orientationIsHorizontal:{get:function(){return window.innerWidth>window.innerHeight}},offsetX:{get:function(){return this._layer.offsetX},set:function(t){this._layer.offsetX=this._tinyLayer.offsetX=t,this._textureView.offsetX=this._layer.offsetX}},isShown:{get:function(){return this._isShown}},show:{value:function(){if(!this.isShown){this._isShown=!0,window.addLayer(this._tinyLayer),window.addLayer(this._layer);var t=this;window.addEventListener("orientationchange",this._onOrientationChange=function(){setTimeout(function(){t._layOut()},1e3)}),this._stage.addEventListener("enterFrame",this._onEnterFrame=function(e){t.onEnterFrame(e)}),this._logView.show(),this._layOut()}}},hide:{value:function(){this.isShown&&(this._isShown=!1,window.removeLayer(this._layer),window.removeLayer(this._tinyLayer),window.removeEventListener("orientationchange",this._onOrientationChange),this._stage.removeEventListener("enterFrame",this._onEnterFrame),this._onOrientationChange=null,this._logView.hide(),this._textureView.hide())}},log:{value:function(){this._logView.log.apply(this._logView,arguments),d.apply(console,arguments)}},onEnterFrame:{value:function(t){this._graphView.notifyEnterFrame(t),this._pullTab.notifyEnterFrame(t)}},onUncaughtError:{value:function(){this._logView.onUncaughtError.apply(this._logView,arguments),this.show(),g.apply(window,arguments)}},_layOut:{value:function(){var t,e,i=30;if(this.orientationIsHorizontal){var t=2*640*(window.innerWidth/window.innerHeight)/3,e=1280/3;this._tiny.width=this._stage.stageWidth=t,this._tiny.height=this._stage.stageHeight=e,this._bg.br(t,e),this._logView.offset(0,0).resize(3*t/5,e-i),this._textureView.offset(0,0).resize(3*t/5,e-i),this._graphView.offset(3*t/5,0).resize(2*t/5,e/2),this._buttonList.offset(3*t/5,e/2),this._footer.offset(0,e-i).resize(t,i)}else{var t=1280/3,e=2*640*(window.innerHeight/window.innerWidth)/3;this._tiny.width=this._stage.stageWidth=t,this._tiny.height=this._stage.stageHeight=e,this._bg.br(t,e),this._logView.offset(0,0).resize(t,3*e/5),this._textureView.offset(0,0).resize(t,3*e/5),this._graphView.offset(t/2,3*e/5).resize(t/2,2*e/5-i),this._buttonList.offset(0,3*e/5),this._footer.offset(0,e-i).resize(t,i)}}}}),p=new f;console.log=function(){p.log.apply(p,arguments)},window.onUncaughtError=function(){p.onUncaughtError.apply(p,arguments)},window.devtools?window.devtools.view=p:window.debug=p}(),function(){function t(t){var e=JSON.stringify(t);app.nativeLog("inspector.send notify "+(t.method?t.method:"")),i.send(e)}function e(e){var i=e+"Agent";return!o[i]&&window[i]&&(o[i]=new window[i](t,r)),o[i]||console.log(i+" is not found!"),o[i]}var i=devtools.inspector;i.start();var n=function(){var t=arguments.length,e=0,i=this;this.cnt=function(){e++,e>=t&&this.onload()};for(var n=0;t>n;n++)new Script(arguments[n]).onload=function(){i.cnt()}};console.log("local!!");var s=window.INSPECTOR||"http://herlock.nb.sonicmoov.net/inspector/",h=s+"device/",a=s+"device/agents/";new n(h+"helpers.js",a+"DebuggerAgent.js",a+"InspectorAgent.js",a+"PageAgent.js",a+"TimelineAgent.js",a+"WorkerAgent.js",a+"RuntimeAgent.js",a+"ConsoleAgent.js",a+"ProfilerAgent.js",a+"DOMStorageAgent.js",a+"DOMAgent.js").onload=function(){},location.onreload=function(){t({method:"Inspector.reload",params:{}})};var r=null,o={};i.getAgent=e,i.onMessage=function(t){app.nativeLog("inspector.onMessage");var n;try{app.nativeLog("inspector.onMessage JSON.parse"),n=JSON.parse(t)}catch(s){console.log(s)}var h=n.method.split(".")[0],a=n.method.split(".")[1],r=n.id,o=n.params,c=e(h);c[a]||console.log(n.method+" is not found!"),c[a](o,function(t){var e=JSON.stringify({id:r,result:t});app.nativeLog("inspector.send "+a+"id:"+r),i.send(e)})}}()(function(){function t(t){var e=JSON.stringify(t);app.nativeLog("inspector.send notify "+(t.method?t.method:"")),i.send(e)}function e(e){return e+="Agent",!a[e]&&window[e]&&(a[e]=new window[e](t,h)),a[e]||console.log(e+" is not found!"),a[e]}var i=devtools.inspector;i.start(),console.log("local!!");var n=window.INSPECTOR||"http://herlock.nb.sonicmoov.net/inspector/",s=n+"device/agents/";new(function(){var t=arguments.length,e=0,i=this;this.cnt=function(){e++,e>=t&&this.onload()};for(var n=0;t>n;n++)new Script(arguments[n]).onload=function(){i.cnt()}})(n+"device/helpers.js",s+"DebuggerAgent.js",s+"InspectorAgent.js",s+"PageAgent.js",s+"TimelineAgent.js",s+"WorkerAgent.js",s+"RuntimeAgent.js",s+"ConsoleAgent.js",s+"ProfilerAgent.js",s+"DOMStorageAgent.js",s+"DOMAgent.js").onload=function(){},location.onreload=function(){t({method:"Inspector.reload",params:{}})};var h=null,a={};i.getAgent=e,i.onMessage=function(t){app.nativeLog("inspector.onMessage");var n;try{app.nativeLog("inspector.onMessage JSON.parse"),n=JSON.parse(t)}catch(s){console.log(s)}var h=n.method.split(".")[0],a=n.method.split(".")[1],r=n.id;t=n.params,h=e(h),h[a]||console.log(n.method+" is not found!"),h[a](t,function(t){t=JSON.stringify({id:r,result:t}),app.nativeLog("inspector.send "+a+"id:"+r),i.send(t)})}})();